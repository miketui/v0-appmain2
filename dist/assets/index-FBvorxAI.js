import{j as e}from"./ui-mXWjznpv.js";import{r as o,u as Pe,a as Ge,L as he,B as Je,R as Ke,b as W,N as ae,c as Ze}from"./router-Djq0HxpP.js";import{a as Qe,g as Xe}from"./vendor-D3F3s8fL.js";import{a as Ye}from"./utils-NIGUFBhG.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var le={},Se;function es(){if(Se)return le;Se=1;var s=Qe();return le.createRoot=s.createRoot,le.hydrateRoot=s.hydrateRoot,le}var ss=es();const ts=Xe(ss);let as={data:""},rs=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||as,ns=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ls=/\/\*[^]*?\*\/|  +/g,_e=/\n+/g,G=(s,t)=>{let r="",i="",l="";for(let c in s){let a=s[c];c[0]=="@"?c[1]=="i"?r=c+" "+a+";":i+=c[1]=="f"?G(a,c):c+"{"+G(a,c[1]=="k"?"":t)+"}":typeof a=="object"?i+=G(a,t?t.replace(/([^,])+/g,h=>c.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,y=>/&/.test(y)?y.replace(/&/g,h):h?h+" "+y:y)):c):a!=null&&(c=/^--/.test(c)?c:c.replace(/[A-Z]/g,"-$&").toLowerCase(),l+=G.p?G.p(c,a):c+":"+a+";")}return r+(t&&l?t+"{"+l+"}":l)+i},H={},$e=s=>{if(typeof s=="object"){let t="";for(let r in s)t+=r+$e(s[r]);return t}return s},is=(s,t,r,i,l)=>{let c=$e(s),a=H[c]||(H[c]=(y=>{let v=0,p=11;for(;v<y.length;)p=101*p+y.charCodeAt(v++)>>>0;return"go"+p})(c));if(!H[a]){let y=c!==s?s:(v=>{let p,b,f=[{}];for(;p=ns.exec(v.replace(ls,""));)p[4]?f.shift():p[3]?(b=p[3].replace(_e," ").trim(),f.unshift(f[0][b]=f[0][b]||{})):f[0][p[1]]=p[2].replace(_e," ").trim();return f[0]})(s);H[a]=G(l?{["@keyframes "+a]:y}:y,r?"":"."+a)}let h=r&&H.g?H.g:null;return r&&(H.g=H[a]),((y,v,p,b)=>{b?v.data=v.data.replace(b,y):v.data.indexOf(y)===-1&&(v.data=p?y+v.data:v.data+y)})(H[a],t,i,h),a},os=(s,t,r)=>s.reduce((i,l,c)=>{let a=t[c];if(a&&a.call){let h=a(r),y=h&&h.props&&h.props.className||/^go/.test(h)&&h;a=y?"."+y:h&&typeof h=="object"?h.props?"":G(h,""):h===!1?"":h}return i+l+(a??"")},"");function de(s){let t=this||{},r=s.call?s(t.p):s;return is(r.unshift?r.raw?os(r,[].slice.call(arguments,1),t.p):r.reduce((i,l)=>Object.assign(i,l&&l.call?l(t.p):l),{}):r,rs(t.target),t.g,t.o,t.k)}let Le,pe,ge;de.bind({g:1});let q=de.bind({k:1});function cs(s,t,r,i){G.p=t,Le=s,pe=r,ge=i}function Z(s,t){let r=this||{};return function(){let i=arguments;function l(c,a){let h=Object.assign({},c),y=h.className||l.className;r.p=Object.assign({theme:pe&&pe()},h),r.o=/ *go\d+/.test(y),h.className=de.apply(r,i)+(y?" "+y:"");let v=s;return s[0]&&(v=h.as||s,delete h.as),ge&&v[0]&&ge(h),Le(v,h)}return l}}var ds=s=>typeof s=="function",ce=(s,t)=>ds(s)?s(t):s,ms=(()=>{let s=0;return()=>(++s).toString()})(),De=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),us=20,Ne="default",Fe=(s,t)=>{let{toastLimit:r}=s.settings;switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,r)};case 1:return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:i}=t;return Fe(s,{type:s.toasts.find(a=>a.id===i.id)?1:0,toast:i});case 3:let{toastId:l}=t;return{...s,toasts:s.toasts.map(a=>a.id===l||l===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let c=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+c}))}}},oe=[],Oe={toasts:[],pausedAt:void 0,settings:{toastLimit:us}},U={},Te=(s,t=Ne)=>{U[t]=Fe(U[t]||Oe,s),oe.forEach(([r,i])=>{r===t&&i(U[t])})},Be=s=>Object.keys(U).forEach(t=>Te(s,t)),xs=s=>Object.keys(U).find(t=>U[t].toasts.some(r=>r.id===s)),me=(s=Ne)=>t=>{Te(t,s)},hs={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ps=(s={},t=Ne)=>{let[r,i]=o.useState(U[t]||Oe),l=o.useRef(U[t]);o.useEffect(()=>(l.current!==U[t]&&i(U[t]),oe.push([t,i]),()=>{let a=oe.findIndex(([h])=>h===t);a>-1&&oe.splice(a,1)}),[t]);let c=r.toasts.map(a=>{var h,y,v;return{...s,...s[a.type],...a,removeDelay:a.removeDelay||((h=s[a.type])==null?void 0:h.removeDelay)||s?.removeDelay,duration:a.duration||((y=s[a.type])==null?void 0:y.duration)||s?.duration||hs[a.type],style:{...s.style,...(v=s[a.type])==null?void 0:v.style,...a.style}}});return{...r,toasts:c}},gs=(s,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...r,id:r?.id||ms()}),ne=s=>(t,r)=>{let i=gs(t,s,r);return me(i.toasterId||xs(i.id))({type:2,toast:i}),i.id},$=(s,t)=>ne("blank")(s,t);$.error=ne("error");$.success=ne("success");$.loading=ne("loading");$.custom=ne("custom");$.dismiss=(s,t)=>{let r={type:3,toastId:s};t?me(t)(r):Be(r)};$.dismissAll=s=>$.dismiss(void 0,s);$.remove=(s,t)=>{let r={type:4,toastId:s};t?me(t)(r):Be(r)};$.removeAll=s=>$.remove(void 0,s);$.promise=(s,t,r)=>{let i=$.loading(t.loading,{...r,...r?.loading});return typeof s=="function"&&(s=s()),s.then(l=>{let c=t.success?ce(t.success,l):void 0;return c?$.success(c,{id:i,...r,...r?.success}):$.dismiss(i),l}).catch(l=>{let c=t.error?ce(t.error,l):void 0;c?$.error(c,{id:i,...r,...r?.error}):$.dismiss(i)}),s};var fs=1e3,ys=(s,t="default")=>{let{toasts:r,pausedAt:i}=ps(s,t),l=o.useRef(new Map).current,c=o.useCallback((b,f=fs)=>{if(l.has(b))return;let j=setTimeout(()=>{l.delete(b),a({type:4,toastId:b})},f);l.set(b,j)},[]);o.useEffect(()=>{if(i)return;let b=Date.now(),f=r.map(j=>{if(j.duration===1/0)return;let z=(j.duration||0)+j.pauseDuration-(b-j.createdAt);if(z<0){j.visible&&$.dismiss(j.id);return}return setTimeout(()=>$.dismiss(j.id,t),z)});return()=>{f.forEach(j=>j&&clearTimeout(j))}},[r,i,t]);let a=o.useCallback(me(t),[t]),h=o.useCallback(()=>{a({type:5,time:Date.now()})},[a]),y=o.useCallback((b,f)=>{a({type:1,toast:{id:b,height:f}})},[a]),v=o.useCallback(()=>{i&&a({type:6,time:Date.now()})},[i,a]),p=o.useCallback((b,f)=>{let{reverseOrder:j=!1,gutter:z=8,defaultPosition:D}=f||{},M=r.filter(_=>(_.position||D)===(b.position||D)&&_.height),d=M.findIndex(_=>_.id===b.id),S=M.filter((_,E)=>E<d&&_.visible).length;return M.filter(_=>_.visible).slice(...j?[S+1]:[0,S]).reduce((_,E)=>_+(E.height||0)+z,0)},[r]);return o.useEffect(()=>{r.forEach(b=>{if(b.dismissed)c(b.id,b.removeDelay);else{let f=l.get(b.id);f&&(clearTimeout(f),l.delete(b.id))}})},[r,c]),{toasts:r,handlers:{updateHeight:y,startPause:h,endPause:v,calculateOffset:p}}},bs=q`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,js=q`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vs=q`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ns=Z("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${bs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${js} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vs} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ws=q`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ks=Z("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${ws} 1s linear infinite;
`,Cs=q`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ss=q`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_s=Z("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Cs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ss} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,As=Z("div")`
  position: absolute;
`,zs=Z("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ms=q`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Es=Z("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ms} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ps=({toast:s})=>{let{icon:t,type:r,iconTheme:i}=s;return t!==void 0?typeof t=="string"?o.createElement(Es,null,t):t:r==="blank"?null:o.createElement(zs,null,o.createElement(ks,{...i}),r!=="loading"&&o.createElement(As,null,r==="error"?o.createElement(Ns,{...i}):o.createElement(_s,{...i})))},$s=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ls=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Ds="0%{opacity:0;} 100%{opacity:1;}",Fs="0%{opacity:1;} 100%{opacity:0;}",Os=Z("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ts=Z("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Bs=(s,t)=>{let r=s.includes("top")?1:-1,[i,l]=De()?[Ds,Fs]:[$s(r),Ls(r)];return{animation:t?`${q(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${q(l)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Rs=o.memo(({toast:s,position:t,style:r,children:i})=>{let l=s.height?Bs(s.position||t||"top-center",s.visible):{opacity:0},c=o.createElement(Ps,{toast:s}),a=o.createElement(Ts,{...s.ariaProps},ce(s.message,s));return o.createElement(Os,{className:s.className,style:{...l,...r,...s.style}},typeof i=="function"?i({icon:c,message:a}):o.createElement(o.Fragment,null,c,a))});cs(o.createElement);var Us=({id:s,className:t,style:r,onHeightUpdate:i,children:l})=>{let c=o.useCallback(a=>{if(a){let h=()=>{let y=a.getBoundingClientRect().height;i(s,y)};h(),new MutationObserver(h).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[s,i]);return o.createElement("div",{ref:c,className:t,style:r},l)},Is=(s,t)=>{let r=s.includes("top"),i=r?{top:0}:{bottom:0},l=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:De()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...i,...l}},Hs=de`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ie=16,qs=({reverseOrder:s,position:t="top-center",toastOptions:r,gutter:i,children:l,toasterId:c,containerStyle:a,containerClassName:h})=>{let{toasts:y,handlers:v}=ys(r,c);return o.createElement("div",{"data-rht-toaster":c||"",style:{position:"fixed",zIndex:9999,top:ie,left:ie,right:ie,bottom:ie,pointerEvents:"none",...a},className:h,onMouseEnter:v.startPause,onMouseLeave:v.endPause},y.map(p=>{let b=p.position||t,f=v.calculateOffset(p,{reverseOrder:s,gutter:i,defaultPosition:t}),j=Is(b,f);return o.createElement(Us,{id:p.id,key:p.id,onHeightUpdate:v.updateHeight,className:p.visible?Hs:"",style:j},p.type==="custom"?ce(p.message,p):l?l(p):o.createElement(Rs,{toast:p,position:b}))}))},A=$;const fe=Ye.create({baseURL:import.meta.env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api"});fe.interceptors.request.use(s=>{const t=localStorage.getItem("token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});const Re=o.createContext();function Vs({children:s}){const[t,r]=o.useState(null),[i,l]=o.useState(null),[c,a]=o.useState(!1),[h,y]=o.useState(!0);o.useEffect(()=>{localStorage.getItem("token")?fe.get("/auth/profile").then(j=>{r(j.data.user),l(j.data.profile)}).finally(()=>y(!1)):y(!1)},[]);const b={user:t,userProfile:i,loading:c,initializing:h,login:async f=>{a(!0);try{await fe.post("/auth/login",{email:f}),A.success("Check your email for the login link!")}catch(j){A.error(j.response?.data?.error||"An error occurred")}finally{a(!1)}},signOut:()=>{localStorage.removeItem("token"),r(null),l(null)},hasRole:f=>i?Array.isArray(f)?f.includes(i.role):i.role===f:!1,isAdmin:()=>i?.role==="Admin",isLeaderOrAdmin:()=>["Leader","Admin"].includes(i?.role),isMemberOrAbove:()=>["Member","Leader","Admin"].includes(i?.role)};return e.jsx(Re.Provider,{value:b,children:s})}function I(){const s=o.useContext(Re);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ue=(...s)=>s.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=o.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:a,...h},y)=>o.createElement("svg",{ref:y,...Gs,width:t,height:t,stroke:s,strokeWidth:i?Number(r)*24/Number(t):r,className:Ue("lucide",l),...h},[...a.map(([v,p])=>o.createElement(v,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=(s,t)=>{const r=o.forwardRef(({className:i,...l},c)=>o.createElement(Js,{ref:c,iconNode:t,className:Ue(`lucide-${Ws(s)}`,i),...l}));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=k("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=k("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=k("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=k("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=k("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=k("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=k("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=k("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=k("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=k("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=k("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=k("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=k("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=k("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=k("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=k("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=k("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=k("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=k("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=k("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=k("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=k("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=k("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=k("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=k("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=k("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=k("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=k("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=k("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=k("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nt=()=>{const[s,t]=o.useState(""),{login:r,loading:i}=I(),[l,c]=o.useState(!1),a=async h=>{h.preventDefault(),!(!s||i)&&(await r(s),c(!0))};return l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(be,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Check Your Email"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a magic link to ",e.jsx("strong",{children:s}),". Click the link in your email to complete your sign-in."]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("p",{children:"Didn't receive the email? Check your spam folder or"}),e.jsx("button",{onClick:()=>c(!1),className:"text-blue-600 hover:text-blue-700 font-medium",children:"try again"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to"}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-4",children:"Haus of Basquiat"}),e.jsx("p",{className:"text-gray-600",children:"Enter your email to sign in or apply for membership"})]}),e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(et,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",type:"email",required:!0,value:s,onChange:h=>t(h.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"your@email.com",disabled:i})]})]}),e.jsxs("button",{type:"submit",disabled:i||!s,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-medium rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx("span",{children:i?"Processing...":"Continue"}),!i&&e.jsx(ye,{size:16})]})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:e.jsxs("p",{children:["By continuing, you agree to our community guidelines and",e.jsx("br",{}),"commitment to creating a safe, inclusive space."]})})]})})},lt=()=>{const s=Pe(),{userProfile:t}=I(),[r,i]=o.useState(1),[l,c]=o.useState(!1),[a,h]=o.useState({displayName:t?.display_name||"",pronouns:t?.pronouns||"",dateOfBirth:t?.date_of_birth||"",phone:t?.phone||"",bio:t?.bio||"",ballroomExperience:t?.ballroom_experience||"",categories:[],houses:"",achievements:"",whyJoin:"",contribution:"",references:"",socialLinks:t?.social_links||{},codeOfConduct:!1,communityGuidelines:!1,dataProcessing:!1}),y=[{number:1,title:"Personal Info",icon:Ce},{number:2,title:"Ballroom Experience",icon:qe},{number:3,title:"Community",icon:re},{number:4,title:"Review",icon:be}],v=["Voguing","Runway","Fashion","Performance","Realness","Butch Queen","Femme Queen","Butch","House Parent","Commentary"],p=(d,S)=>{h(_=>({..._,[d]:S}))},b=d=>{h(S=>({...S,categories:S.categories.includes(d)?S.categories.filter(_=>_!==d):[...S.categories,d]}))},f=d=>{switch(d){case 1:return a.displayName&&a.pronouns&&a.dateOfBirth;case 2:return a.ballroomExperience&&a.categories.length>0;case 3:return a.whyJoin&&a.contribution;case 4:return a.codeOfConduct&&a.communityGuidelines&&a.dataProcessing;default:return!1}},j=()=>{f(r)?i(d=>Math.min(d+1,4)):A.error("Please fill in all required fields")},z=()=>{i(d=>Math.max(d-1,1))},D=async()=>{if(!f(4)){A.error("Please complete all required fields and agreements");return}c(!0);try{const d=await fetch("/api/auth/apply",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicantData:a})});if(d.ok)A.success("Application submitted successfully!"),s("/");else{const S=await d.json();A.error(S.message||"Failed to submit application")}}catch(d){console.error("Application error:",d),A.error("An error occurred while submitting your application")}finally{c(!1)}},M=()=>{switch(r){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name *"}),e.jsx("input",{type:"text",value:a.displayName,onChange:d=>p("displayName",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"How you'd like to be known in the community"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pronouns *"}),e.jsx("input",{type:"text",value:a.pronouns,onChange:d=>p("pronouns",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., she/her, he/him, they/them"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),e.jsx("input",{type:"date",value:a.dateOfBirth,onChange:d=>p("dateOfBirth",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:a.phone,onChange:d=>p("phone",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"For emergency contact"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{value:a.bio,onChange:d=>p("bio",d.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"Tell us a bit about yourself..."})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ballroom Experience"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience Level *"}),e.jsxs("select",{value:a.ballroomExperience,onChange:d=>p("ballroomExperience",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Select your experience level"}),e.jsx("option",{value:"New",children:"New to the scene"}),e.jsx("option",{value:"Beginner",children:"Beginner (less than 1 year)"}),e.jsx("option",{value:"Intermediate",children:"Intermediate (1-3 years)"}),e.jsx("option",{value:"Advanced",children:"Advanced (3-5 years)"}),e.jsx("option",{value:"Veteran",children:"Veteran (5+ years)"}),e.jsx("option",{value:"Legendary",children:"Legendary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories of Interest *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:v.map(d=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:a.categories.includes(d),onChange:()=>b(d),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:d})]},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"House Affiliations"}),e.jsx("input",{type:"text",value:a.houses,onChange:d=>p("houses",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"Any current or past house affiliations"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Achievements & Trophies"}),e.jsx("textarea",{value:a.achievements,onChange:d=>p("achievements",d.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"Any notable achievements, trophies, or recognitions..."})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Community Involvement"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Why do you want to join Haus of Basquiat? *"}),e.jsx("textarea",{value:a.whyJoin,onChange:d=>p("whyJoin",d.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"Share your motivation and what draws you to our community..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How will you contribute to the community? *"}),e.jsx("textarea",{value:a.contribution,onChange:d=>p("contribution",d.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"What skills, talents, or energy will you bring to the community..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"References"}),e.jsx("textarea",{value:a.references,onChange:d=>p("references",d.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"Any community members who can vouch for you (optional)..."})]})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Review & Agreement"}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Application Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",a.displayName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pronouns:"})," ",a.pronouns]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Experience:"})," ",a.ballroomExperience]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Categories:"})," ",a.categories.join(", ")]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:a.codeOfConduct,onChange:d=>p("codeOfConduct",d.target.checked),className:"mt-1 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"I agree to abide by the community code of conduct and maintain a safe, inclusive environment for all members *"})]}),e.jsxs("label",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:a.communityGuidelines,onChange:d=>p("communityGuidelines",d.target.checked),className:"mt-1 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"I have read and agree to follow the community guidelines and house rules *"})]}),e.jsxs("label",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:a.dataProcessing,onChange:d=>p("dataProcessing",d.target.checked),className:"mt-1 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"I consent to the processing of my personal data for membership purposes *"})]})]})]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Membership Application"}),e.jsx("p",{className:"text-gray-600",children:"Join the Haus of Basquiat community"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"flex space-x-4",children:y.map(d=>{const S=d.icon,_=r===d.number,E=r>d.number;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${_?"border-purple-600 bg-purple-600 text-white":E?"border-green-600 bg-green-600 text-white":"border-gray-300 bg-gray-100 text-gray-400"}`,children:e.jsx(S,{size:20})}),e.jsx("span",{className:`ml-2 text-sm font-medium ${_?"text-purple-600":E?"text-green-600":"text-gray-400"}`,children:d.title}),d.number<y.length&&e.jsx(ye,{className:"mx-4 text-gray-300",size:16})]},d.number)})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 mb-8",children:M()}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:z,disabled:r===1,className:`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium ${r===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx(Ie,{size:16}),e.jsx("span",{children:"Previous"})]}),r<4?e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700",children:[e.jsx("span",{children:"Next"}),e.jsx(ye,{size:16})]}):e.jsxs("button",{onClick:D,disabled:l,className:"flex items-center space-x-2 px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50",children:[e.jsx("span",{children:l?"Submitting...":"Submit Application"}),e.jsx(be,{size:16})]})]})]})})},K=({size:s="md",text:t="Loading..."})=>{const r={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] space-y-4",children:[e.jsx("div",{className:`animate-spin rounded-full border-4 border-gray-300 border-t-blue-600 ${r[s]}`}),t&&e.jsx("p",{className:"text-gray-600 text-sm",children:t})]})},it=()=>{const{userProfile:s,supabase:t,isMemberOrAbove:r}=I(),[i,l]=o.useState([]),[c,a]=o.useState(!0),[h,y]=o.useState(!1),[v,p]=o.useState(!1),[b,f]=o.useState("all"),[j,z]=o.useState({content:"",visibility:"public",media:[]}),[D,M]=o.useState([]),[d,S]=o.useState({}),[_,E]=o.useState({}),[O,R]=o.useState({}),Q=o.useRef(null),T=async(m=1)=>{try{const g=(await t.auth.getSession()).data.session?.access_token,n=new URLSearchParams({page:m.toString(),limit:"10",...b==="house"&&{houseOnly:"true"}}),u=await fetch(`/api/posts?${n}`,{headers:{Authorization:`Bearer ${g}`}});if(!u.ok)throw new Error("Failed to fetch posts");const w=await u.json();l(m===1?w.posts:C=>[...C,...w.posts])}catch(g){console.error("Error fetching posts:",g),A.error("Failed to load posts")}},X=async()=>{if(!j.content.trim()&&D.length===0){A.error("Please add some content or media to your post");return}y(!0);try{const m=(await t.auth.getSession()).data.session?.access_token,g=new FormData;g.append("content",j.content),g.append("visibility",j.visibility),s.house_id&&g.append("houseId",s.house_id),D.forEach(w=>{g.append("media",w)});const n=await fetch("/api/posts",{method:"POST",headers:{Authorization:`Bearer ${m}`},body:g});if(!n.ok){const w=await n.json();throw new Error(w.error||"Failed to create post")}const u=await n.json();l(w=>[u.post,...w]),z({content:"",visibility:"public",media:[]}),M([]),p(!1),A.success("Post created successfully!")}catch(m){console.error("Error creating post:",m),A.error(m.message)}finally{y(!1)}},x=async m=>{try{const g=(await t.auth.getSession()).data.session?.access_token,n=await fetch(`/api/posts/${m}/like`,{method:"POST",headers:{Authorization:`Bearer ${g}`}});if(!n.ok)throw new Error("Failed to toggle like");const u=await n.json();l(w=>w.map(C=>C.id===m?{...C,user_liked:u.liked,likes_count:u.liked?C.likes_count+1:C.likes_count-1}:C))}catch(g){console.error("Error toggling like:",g),A.error("Failed to update like")}},N=async m=>{try{const g=(await t.auth.getSession()).data.session?.access_token,n=await fetch(`/api/posts/${m}/comments`,{headers:{Authorization:`Bearer ${g}`}});if(!n.ok)throw new Error("Failed to fetch comments");const u=await n.json();R(w=>({...w,[m]:u.comments}))}catch(g){console.error("Error fetching comments:",g),A.error("Failed to load comments")}},L=async m=>{const g=d[m];if(!(!g||!g.trim()))try{const n=(await t.auth.getSession()).data.session?.access_token,u=await fetch(`/api/posts/${m}/comments`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({content:g.trim()})});if(!u.ok){const C=await u.json();throw new Error(C.error||"Failed to add comment")}const w=await u.json();R(C=>({...C,[m]:[...C[m]||[],w.comment]})),l(C=>C.map(P=>P.id===m?{...P,comments_count:P.comments_count+1}:P)),S(C=>({...C,[m]:""}))}catch(n){console.error("Error adding comment:",n),A.error(n.message)}},F=m=>{const n=Array.from(m.target.files).filter(u=>u.size>10*1024*1024?(A.error(`${u.name} is too large. Maximum size is 10MB.`),!1):!0);M(u=>[...u,...n].slice(0,5))},V=m=>{M(g=>g.filter((n,u)=>u!==m))},B=m=>{E(g=>({...g,[m]:!g[m]})),O[m]||N(m)},ee=m=>{const g=new Date(m),u=new Date-g;return u<6e4?"just now":u<36e5?`${Math.floor(u/6e4)}m ago`:u<864e5?`${Math.floor(u/36e5)}h ago`:u<6048e5?`${Math.floor(u/864e5)}d ago`:g.toLocaleDateString()},ue=m=>{switch(m){case"house_only":return e.jsx(J,{size:14,className:"text-gray-500"});case"members_only":return e.jsx(J,{size:14,className:"text-blue-500"});default:return e.jsx(ze,{size:14,className:"text-green-500"})}};return o.useEffect(()=>{(async()=>{a(!0),await T(1),a(!1)})()},[b]),c?e.jsx(K,{text:"Loading community feed..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Community Feed"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome back, ",s?.display_name||"Member","! Share your journey with the community."]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="all"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(ze,{size:16,className:"inline mr-2"}),"All Posts"]}),s?.house_id&&e.jsxs("button",{onClick:()=>f("house"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="house"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(J,{size:16,className:"inline mr-2"}),"My House"]})]}),r()&&e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ke,{size:16}),e.jsx("span",{children:"New Post"})]})]})}),e.jsx("div",{className:"space-y-6",children:i.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:[e.jsx(se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to share something with the community!"}),r()&&e.jsx("button",{onClick:()=>p(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create First Post"})]}):i.map(m=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:m.author.avatar_url?e.jsx("img",{src:m.author.avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):e.jsx("span",{className:"text-sm font-medium text-gray-700",children:m.author.display_name?.[0]?.toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:m.author.display_name}),ue(m.visibility)]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:ee(m.created_at)}),m.author.house&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:m.author.house.name})]})]})]})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(He,{size:20})})]}),m.content&&e.jsx("p",{className:"text-gray-900 mb-4 whitespace-pre-wrap",children:m.content})]}),m.media_urls&&m.media_urls.length>0&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("div",{className:`grid gap-2 ${m.media_urls.length===1?"grid-cols-1":(m.media_urls.length===2,"grid-cols-2")}`,children:m.media_urls.slice(0,4).map((g,n)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:g,alt:"",className:"w-full h-48 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(g,"_blank")}),n===3&&m.media_urls.length>4&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-lg font-medium",children:["+",m.media_urls.length-4," more"]})})]},n))})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("button",{onClick:()=>x(m.id),className:`flex items-center space-x-2 transition-colors ${m.user_liked?"text-red-500 hover:text-red-600":"text-gray-600 hover:text-red-500"}`,children:[e.jsx(Ys,{size:20,className:m.user_liked?"fill-current":""}),e.jsx("span",{className:"text-sm font-medium",children:m.likes_count})]}),e.jsxs("button",{onClick:()=>B(m.id),className:"flex items-center space-x-2 text-gray-600 hover:text-blue-500 transition-colors",children:[e.jsx(se,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:m.comments_count})]}),e.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-green-500 transition-colors",children:[e.jsx(at,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Share"})]})]})}),_[m.id]&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:s?.avatar_url?e.jsx("img",{src:s.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("span",{className:"text-xs font-medium text-gray-700",children:s?.display_name?.[0]?.toUpperCase()})}),e.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Add a comment...",value:d[m.id]||"",onChange:g=>S(n=>({...n,[m.id]:g.target.value})),onKeyPress:g=>{g.key==="Enter"&&L(m.id)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),e.jsx("button",{onClick:()=>L(m.id),disabled:!d[m.id]?.trim(),className:"p-2 text-blue-600 hover:text-blue-700 disabled:text-gray-400 disabled:cursor-not-allowed",children:e.jsx(We,{size:16})})]})]}),O[m.id]&&O[m.id].length>0&&e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:O[m.id].map(g=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center",children:g.author.avatar_url?e.jsx("img",{src:g.author.avatar_url,alt:"",className:"w-6 h-6 rounded-full object-cover"}):e.jsx("span",{className:"text-xs font-medium text-gray-700",children:g.author.display_name?.[0]?.toUpperCase()})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.author.display_name}),e.jsx("span",{className:"text-xs text-gray-500",children:ee(g.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-900",children:g.content})]})})]},g.id))})]})]})]},m.id))}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Post"}),e.jsx("button",{onClick:()=>{p(!1),z({content:"",visibility:"public",media:[]}),M([])},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Y,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("textarea",{value:j.content,onChange:m=>z(g=>({...g,content:m.target.value})),placeholder:"What's happening in the community?",className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"4"})}),D.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.map((m,g)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(m),alt:"",className:"w-full h-24 object-cover rounded-lg"}),e.jsx("button",{onClick:()=>V(g),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(Y,{size:14})})]},g))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{ref:Q,type:"file",multiple:!0,accept:"image/*",onChange:F,className:"hidden"}),e.jsx("button",{onClick:()=>Q.current?.click(),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",disabled:D.length>=5,children:e.jsx(we,{size:20})})]}),e.jsxs("select",{value:j.visibility,onChange:m=>z(g=>({...g,visibility:m.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"public",children:"ðŸŒ Public"}),e.jsx("option",{value:"members_only",children:"ðŸ‘¥ Members Only"}),s?.house_id&&e.jsx("option",{value:"house_only",children:"ðŸ  House Only"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{p(!1),z({content:"",visibility:"public",media:[]}),M([])},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:X,disabled:h||!j.content.trim()&&D.length===0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Posting...":"Post"})]})]})]})})})]})},ot=()=>{const{userProfile:s,isAdmin:t,supabase:r}=I(),[i,l]=o.useState([]),[c,a]=o.useState([]),[h,y]=o.useState(!0),[v,p]=o.useState(!1),[b,f]=o.useState(""),[j,z]=o.useState(""),[D,M]=o.useState(!1),[d,S]=o.useState({title:"",category:"",accessLevel:"Member",tags:"",file:null}),_=async()=>{try{const x=(await r.auth.getSession()).data.session?.access_token,N=new URLSearchParams;b&&N.append("search",b),j&&N.append("category",j);const L=await fetch(`/api/documents?${N}`,{headers:{Authorization:`Bearer ${x}`}});if(!L.ok)throw new Error("Failed to fetch documents");const F=await L.json();l(F.documents)}catch(x){console.error("Error fetching documents:",x),A.error("Failed to load documents")}},E=async()=>{try{const x=(await r.auth.getSession()).data.session?.access_token,N=await fetch("/api/documents/categories",{headers:{Authorization:`Bearer ${x}`}});if(!N.ok)throw new Error("Failed to fetch categories");const L=await N.json();a(L.categories)}catch(x){console.error("Error fetching categories:",x)}};o.useEffect(()=>{(async()=>{y(!0),await Promise.all([_(),E()]),y(!1)})()},[b,j]);const O=async x=>{if(x.preventDefault(),!d.file||!d.title||!d.category){A.error("Please fill in all required fields");return}p(!0);try{const N=new FormData;N.append("file",d.file),N.append("title",d.title),N.append("category",d.category),N.append("accessLevel",d.accessLevel),N.append("tags",d.tags);const L=(await r.auth.getSession()).data.session?.access_token,F=await fetch("/api/documents/upload",{method:"POST",headers:{Authorization:`Bearer ${L}`},body:N});if(!F.ok){const V=await F.json();throw new Error(V.error||"Upload failed")}A.success("Document uploaded successfully!"),M(!1),S({title:"",category:"",accessLevel:"Member",tags:"",file:null}),await _()}catch(N){console.error("Upload error:",N),A.error(N.message)}finally{p(!1)}},R=async(x,N)=>{try{const L=(await r.auth.getSession()).data.session?.access_token,F=await fetch(`/api/documents/${x}/download`,{headers:{Authorization:`Bearer ${L}`}});if(!F.ok){const ee=await F.json();throw new Error(ee.error||"Download failed")}const V=await F.json(),B=document.createElement("a");B.href=V.downloadUrl,B.download=N,B.target="_blank",document.body.appendChild(B),B.click(),document.body.removeChild(B),A.success("Download started")}catch(L){console.error("Download error:",L),A.error(L.message)}},Q=x=>x.startsWith("image/")?e.jsx(we,{className:"w-6 h-6 text-blue-500"}):x==="application/pdf"?e.jsx(re,{className:"w-6 h-6 text-red-500"}):e.jsx(je,{className:"w-6 h-6 text-gray-500"}),T=x=>{if(x===0)return"0 Bytes";const N=1024,L=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(x)/Math.log(N));return parseFloat((x/Math.pow(N,F)).toFixed(2))+" "+L[F]},X=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return h?e.jsx(K,{text:"Loading documents..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Document Library"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Access community resources, guides, and important documents"})]}),t()&&e.jsxs("button",{onClick:()=>M(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ke,{size:16}),e.jsx("span",{children:"Upload Document"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search documents...",value:b,onChange:x=>f(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"md:w-48",children:e.jsxs("div",{className:"relative",children:[e.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsxs("select",{value:j,onChange:x=>z(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[e.jsx("option",{value:"",children:"All Categories"}),c.map(x=>e.jsx("option",{value:x,children:x},x))]})]})})]})}),i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),e.jsx("p",{className:"text-gray-600",children:b||j?"Try adjusting your search or filter criteria":"No documents have been uploaded yet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(x=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[Q(x.file_type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600",children:x.category})]})]}),x.tags&&x.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[x.tags.slice(0,3).map(N=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:N},N)),x.tags.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:["+",x.tags.length-3," more"]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{size:14}),e.jsx("span",{children:x.uploader.display_name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ks,{size:14}),e.jsx("span",{children:X(x.created_at)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:T(x.file_size)}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:x.access_level})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>R(x.id,x.title),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Zs,{size:16}),e.jsx("span",{children:"Download"})]}),x.file_type.startsWith("image/")&&e.jsx("button",{onClick:()=>window.open(x.file_url,"_blank"),className:"px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(Qs,{size:16})})]})]})},x.id))}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Upload Document"}),e.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Y,{size:24})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File *"}),e.jsx("input",{type:"file",accept:".pdf,image/*",onChange:x=>S(N=>({...N,file:x.target.files[0]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: PDF, Images (JPG, PNG, etc.) â€¢ Max size: 10MB"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:d.title,onChange:x=>S(N=>({...N,title:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Document title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{value:d.category,onChange:x=>S(N=>({...N,category:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"Guidelines",children:"Guidelines"}),e.jsx("option",{value:"Resources",children:"Resources"}),e.jsx("option",{value:"Forms",children:"Forms"}),e.jsx("option",{value:"Events",children:"Events"}),e.jsx("option",{value:"Training",children:"Training"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Level"}),e.jsxs("select",{value:d.accessLevel,onChange:x=>S(N=>({...N,accessLevel:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Member",children:"Members"}),e.jsx("option",{value:"Leader",children:"Leaders & Admins"}),e.jsx("option",{value:"Admin",children:"Admins Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:d.tags,onChange:x=>S(N=>({...N,tags:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Comma-separated tags"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>M(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{size:16}),e.jsx("span",{children:"Upload"})]})})]})]})]})})})]})},ct=()=>{const{userProfile:s,supabase:t}=I(),[r,i]=o.useState([]),[l,c]=o.useState(null),[a,h]=o.useState([]),[y,v]=o.useState([]),[p,b]=o.useState(!0),[f,j]=o.useState(!1),[z,D]=o.useState(!1),[M,d]=o.useState(!1),[S,_]=o.useState(""),[E,O]=o.useState([]),[R,Q]=o.useState(""),[T,X]=o.useState(null),x=o.useRef(null),N=o.useRef(null),L=async()=>{try{const n=(await t.auth.getSession()).data.session?.access_token,u=await fetch("/api/chat/threads",{headers:{Authorization:`Bearer ${n}`}});if(!u.ok)throw new Error("Failed to fetch threads");const w=await u.json();i(w.threads)}catch(n){console.error("Error fetching threads:",n),A.error("Failed to load conversations")}},F=async n=>{if(n){j(!0);try{const u=(await t.auth.getSession()).data.session?.access_token,w=await fetch(`/api/chat/threads/${n}/messages`,{headers:{Authorization:`Bearer ${u}`}});if(!w.ok)throw new Error("Failed to fetch messages");const C=await w.json();h(C.messages)}catch(u){console.error("Error fetching messages:",u),A.error("Failed to load messages")}finally{j(!1)}}},V=async(n="")=>{try{const u=(await t.auth.getSession()).data.session?.access_token,w=new URLSearchParams;n&&w.append("search",n);const C=await fetch(`/api/users?${w}`,{headers:{Authorization:`Bearer ${u}`}});if(!C.ok)throw new Error("Failed to fetch users");const P=await C.json();v(P.users)}catch(u){console.error("Error fetching users:",u)}},B=async()=>{if(!(!R.trim()&&!T||!l||z)){D(!0);try{const n=(await t.auth.getSession()).data.session?.access_token,u=new FormData;R.trim()&&u.append("content",R.trim()),T&&(u.append("file",T),u.append("messageType",T.type.startsWith("image/")?"image":"file"));const w=await fetch(`/api/chat/threads/${l.id}/messages`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:u});if(!w.ok){const P=await w.json();throw new Error(P.error||"Failed to send message")}const C=await w.json();h(P=>[...P,C.message]),Q(""),X(null),i(P=>P.map(xe=>xe.id===l.id?{...xe,last_message:C.message,last_message_at:C.message.created_at}:xe)),setTimeout(()=>x.current?.scrollIntoView({behavior:"smooth"}),100)}catch(n){console.error("Error sending message:",n),A.error(n.message)}finally{D(!1)}}},ee=async()=>{if(E.length!==0)try{const n=(await t.auth.getSession()).data.session?.access_token,u=await fetch("/api/chat/threads",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({participantIds:E.map(P=>P.id),threadType:E.length>1?"group":"direct",name:E.length>1?E.map(P=>P.display_name).join(", "):null})});if(!u.ok)throw new Error("Failed to create thread");const w=await u.json(),C={...w.thread,other_participants:w.thread.participants.filter(P=>P.id!==s.id),last_message:null,unread_count:0};i(P=>[C,...P]),c(C),d(!1),O([]),_("")}catch(n){console.error("Error creating thread:",n),A.error("Failed to create conversation")}},ue=n=>{const u=n.target.files[0];if(u){if(u.size>10*1024*1024){A.error("File size must be less than 10MB");return}X(u)}},m=n=>{const u=new Date(n);return new Date-u<1440*60*1e3?u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):u.toLocaleDateString([],{month:"short",day:"numeric"})},g=n=>n.name?n.name:n.other_participants.length===1?n.other_participants[0].display_name:n.other_participants.map(u=>u.display_name).join(", ");return o.useEffect(()=>{if(!l)return;const n=t.channel(`messages:${l.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`thread_id=eq.${l.id}`},u=>{u.new.sender_id!==s.id&&(h(w=>[...w,u.new]),setTimeout(()=>x.current?.scrollIntoView({behavior:"smooth"}),100))}).subscribe();return()=>{n.unsubscribe()}},[l,s.id,t]),o.useEffect(()=>{(async()=>{b(!0),await Promise.all([L(),V()]),b(!1)})()},[]),o.useEffect(()=>{l&&F(l.id)},[l]),o.useEffect(()=>{const n=setTimeout(()=>{M&&V(S)},300);return()=>clearTimeout(n)},[S,M]),p?e.jsx(K,{text:"Loading conversations..."}):e.jsxs("div",{className:"h-[calc(100vh-8rem)] flex bg-white rounded-lg shadow-sm border overflow-hidden",children:[e.jsxs("div",{className:`w-full md:w-80 border-r border-gray-200 flex flex-col ${l?"hidden md:flex":""}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Messages"}),e.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ke,{size:20})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[e.jsx(se,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No conversations yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Start a conversation with community members"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Start Chatting"})]}):r.map(n=>e.jsx("div",{onClick:()=>c(n),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${l?.id===n.id?"bg-blue-50 border-blue-200":""}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:n.other_participants.length===1?n.other_participants[0].avatar_url?e.jsx("img",{src:n.other_participants[0].avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):e.jsx("span",{className:"text-sm font-medium text-gray-700",children:n.other_participants[0].display_name?.[0]?.toUpperCase()}):e.jsx(J,{size:16,className:"text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:g(n)}),n.last_message&&e.jsx("span",{className:"text-xs text-gray-500",children:m(n.last_message.created_at)})]}),n.last_message&&e.jsx("p",{className:"text-sm text-gray-600 truncate",children:n.last_message.message_type==="image"?"ðŸ“· Image":n.last_message.message_type==="file"?"ðŸ“Ž File":n.last_message.content}),n.unread_count>0&&e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-xs text-white font-medium",children:n.unread_count})})]})]})},n.id))})]}),e.jsx("div",{className:`flex-1 flex flex-col ${l?"":"hidden md:flex"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>c(null),className:"md:hidden p-1 text-gray-600 hover:text-gray-900",children:e.jsx(Ie,{size:20})}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:l.other_participants.length===1?l.other_participants[0].avatar_url?e.jsx("img",{src:l.other_participants[0].avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("span",{className:"text-xs font-medium text-gray-700",children:l.other_participants[0].display_name?.[0]?.toUpperCase()}):e.jsx(J,{size:14,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:g(l)}),e.jsx("p",{className:"text-xs text-gray-600",children:l.other_participants.length===1?"Online":`${l.participants?.length||0} members`})]})]}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(He,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(K,{size:"sm",text:"Loading messages..."})}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(se,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No messages yet. Start the conversation!"})]}):a.map(n=>e.jsx("div",{className:`flex ${n.sender_id===s.id?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md ${n.sender_id===s.id?"bg-blue-600 text-white rounded-l-lg rounded-tr-lg":"bg-gray-100 text-gray-900 rounded-r-lg rounded-tl-lg"} px-4 py-2`,children:[n.sender_id!==s.id&&l.thread_type==="group"&&e.jsx("p",{className:"text-xs font-medium mb-1 opacity-75",children:n.sender?.display_name}),n.message_type==="image"&&n.file_url&&e.jsx("img",{src:n.file_url,alt:"Shared image",className:"max-w-full h-auto rounded mb-2 cursor-pointer",onClick:()=>window.open(n.file_url,"_blank")}),n.message_type==="file"&&n.file_url&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(je,{size:16}),e.jsx("a",{href:n.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm underline",children:"Download File"})]}),n.content&&e.jsx("p",{className:"text-sm",children:n.content}),e.jsx("p",{className:`text-xs mt-1 ${n.sender_id===s.id?"text-blue-100":"text-gray-500"}`,children:m(n.created_at)})]})},n.id)),e.jsx("div",{ref:x})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[T&&e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[T.type.startsWith("image/")?e.jsx(we,{size:16,className:"text-gray-600"}):e.jsx(je,{size:16,className:"text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:T.name})]}),e.jsx("button",{onClick:()=>X(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Y,{size:16})})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("textarea",{value:R,onChange:n=>Q(n.target.value),onKeyPress:n=>{n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),B())},placeholder:"Type a message...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"1",style:{minHeight:"40px",maxHeight:"120px"}})}),e.jsx("input",{ref:N,type:"file",onChange:ue,accept:"image/*,.pdf,.doc,.docx,.txt",className:"hidden"}),e.jsx("button",{onClick:()=>N.current?.click(),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(tt,{size:20})}),e.jsx("button",{onClick:B,disabled:z||!R.trim()&&!T,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(We,{size:20})})]})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a conversation"}),e.jsx("p",{className:"text-gray-600",children:"Choose a conversation from the sidebar to start messaging"})]})})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[80vh] overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"New Conversation"}),e.jsx("button",{onClick:()=>{d(!1),O([]),_("")},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Y,{size:24})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search members...",value:S,onChange:n=>_(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),E.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(n=>e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:n.display_name}),e.jsx("button",{onClick:()=>O(u=>u.filter(w=>w.id!==n.id)),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Y,{size:14})})]},n.id))})}),e.jsxs("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:[y.filter(n=>!E.some(u=>u.id===n.id)).map(n=>e.jsx("div",{onClick:()=>O(u=>[...u,n]),className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:n.avatar_url?e.jsx("img",{src:n.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("span",{className:"text-xs font-medium text-gray-700",children:n.display_name?.[0]?.toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.display_name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[n.role," ",n.house?.name&&`â€¢ ${n.house.name}`]})]})]})},n.id)),y.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-600",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No members found"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-6",children:[e.jsx("button",{onClick:()=>{d(!1),O([]),_("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ee,disabled:E.length===0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Start Chat"})]})]})})})]})},dt=()=>{const{userProfile:s}=I();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage the community, review applications, and monitor platform health"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Applications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Ae,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Activity Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"100%"})]})]})})]}),e.jsxs("div",{className:"text-center py-20 bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ve,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-3",children:"Advanced Admin Tools Coming Soon!"}),e.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"We're building comprehensive admin tools including application reviews, user management, analytics dashboard, and community moderation features."}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8 max-w-2xl mx-auto text-sm text-gray-500",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(J,{size:20}),e.jsx("span",{children:"User Management"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(Ee,{size:20}),e.jsx("span",{children:"Application Reviews"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(Ae,{size:20}),e.jsx("span",{children:"Analytics"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(ve,{size:20}),e.jsx("span",{children:"Moderation Tools"})]})]})]})]})},mt=()=>{const{userProfile:s,signOut:t,isAdmin:r,isMemberOrAbove:i}=I(),l=Ge(),[c,a]=o.useState(!1),y=[{path:"/",label:"Feed",icon:qe,roles:["Member","Leader","Admin"]},{path:"/docs",label:"Documents",icon:re,roles:["Member","Leader","Admin"]},{path:"/chat",label:"Chat",icon:se,roles:["Member","Leader","Admin"]},{path:"/dashboard",label:"Dashboard",icon:ve,roles:["Admin"]}].filter(f=>f.roles.includes(s?.role)),v=async()=>{await t()},p=()=>{a(!c)},b=f=>{switch(f){case"Admin":return"bg-red-100 text-red-800";case"Leader":return"bg-purple-100 text-purple-800";case"Member":return"bg-green-100 text-green-800";case"Applicant":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("nav",{className:"bg-white shadow-lg border-b border-gray-200",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(he,{to:"/",className:"text-2xl font-bold text-gray-900",children:"Haus of Basquiat"})}),e.jsx("div",{className:"hidden md:flex items-center space-x-8",children:y.map(f=>{const j=f.icon,z=l.pathname===f.path;return e.jsxs(he,{to:f.path,className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${z?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(j,{size:18}),e.jsx("span",{children:f.label})]},f.path)})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s?.display_name||"User"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b(s?.role)}`,children:s?.role}),s?.house&&e.jsx("span",{className:"text-xs text-gray-500",children:s.house.name})]})]}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:s?.avatar_url?e.jsx("img",{src:s.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):e.jsx(Ce,{size:16,className:"text-gray-600"})})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:[e.jsx(Me,{size:16}),e.jsx("span",{children:"Sign Out"})]})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:p,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:c?e.jsx(Y,{size:24}):e.jsx(st,{size:24})})})]}),c&&e.jsx("div",{className:"md:hidden py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[y.map(f=>{const j=f.icon,z=l.pathname===f.path;return e.jsxs(he,{to:f.path,onClick:()=>a(!1),className:`flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors ${z?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(j,{size:20}),e.jsx("span",{children:f.label})]},f.path)}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsxs("div",{className:"px-3 py-2",children:[e.jsx("p",{className:"text-base font-medium text-gray-900",children:s?.display_name||"User"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b(s?.role)}`,children:s?.role}),s?.house&&e.jsx("span",{className:"text-xs text-gray-500",children:s.house.name})]})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-3 px-3 py-2 text-base font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors w-full",children:[e.jsx(Me,{size:20}),e.jsx("span",{children:"Sign Out"})]})]})]})})]})})},ut=()=>{const s=Pe(),{supabase:t}=I();return o.useEffect(()=>{(async()=>{try{const{data:i,error:l}=await t.auth.getSession();if(l){console.error("Auth callback error:",l),s("/login?error=auth_callback_failed");return}i.session?s("/",{replace:!0}):s("/login",{replace:!0})}catch(i){console.error("Auth callback error:",i),s("/login?error=unexpected_error")}})()},[s,t.auth]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{size:"lg",text:"Completing sign in..."}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Please wait while we complete your authentication."})]})})};function te({children:s,roles:t,requiresApproval:r=!1}){const{user:i,userProfile:l,loading:c,initializing:a}=I();return c||a?e.jsx(K,{}):i?l?l.role==="Applicant"&&l.status==="pending"&&r?e.jsx(ae,{to:"/apply",replace:!0}):t&&!t.includes(l.role)?e.jsx(ae,{to:"/",replace:!0}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(mt,{}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:s})]}):e.jsx(K,{}):e.jsx(ae,{to:"/login",replace:!0})}function xt({children:s}){const{user:t,loading:r,initializing:i}=I();return r||i?e.jsx(K,{}):t?e.jsx(ae,{to:"/",replace:!0}):s}function ht(){return e.jsxs(Ke,{children:[e.jsx(W,{path:"/login",element:e.jsx(xt,{children:e.jsx(nt,{})})}),e.jsx(W,{path:"/auth/callback",element:e.jsx(ut,{})}),e.jsx(W,{path:"/apply",element:e.jsx(te,{roles:["Applicant"],children:e.jsx(lt,{})})}),e.jsx(W,{path:"/",element:e.jsx(te,{roles:["Member","Leader","Admin"],children:e.jsx(it,{})})}),e.jsx(W,{path:"/docs",element:e.jsx(te,{roles:["Member","Leader","Admin"],children:e.jsx(ot,{})})}),e.jsx(W,{path:"/chat",element:e.jsx(te,{roles:["Member","Leader","Admin"],children:e.jsx(ct,{})})}),e.jsx(W,{path:"/dashboard",element:e.jsx(te,{roles:["Admin"],children:e.jsx(dt,{})})}),e.jsx(W,{path:"*",element:e.jsx(ae,{to:"/",replace:!0})})]})}function pt(){return e.jsx(Vs,{children:e.jsx(Je,{children:e.jsxs("div",{className:"App",children:[e.jsx(ht,{}),e.jsx(qs,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}ts.createRoot(document.getElementById("root")).render(e.jsx(Ze.StrictMode,{children:e.jsx(pt,{})}));
//# sourceMappingURL=index-FBvorxAI.js.map
